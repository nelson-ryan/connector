<!DOCTYPE html>
<html lang="en">

<!--stops 'favicon' error-->
<link rel="icon" href="data:,">

<h1>
    <code>connector</code>
</h1>
<body>
<p>
    <code>connector</code>
</p>

<form id="form">
    <p>
    <label for="calendar">Puzzle date:</label> <br>
    <input type="date" id="calendar" min="2025-07-01" max="2025-07-31"
           name="print_date" value="2025-07-22" required>
    </p>
    <p>
    <input type="submit" value="Solve" id="submit">
    </p>
</form>

<pre id="groups"></pre>

<div id="heyooo"></div>

</body>

<script>
async function handleSubmit(event) {
    event.preventDefault();

    const data = new FormData(event.target);
    const value = Object.fromEntries(data.entries());
    value.print_date = data.get("print_date");

    var s = "http://localhost:5000/" + value.print_date
    const response = await fetch(s);
    const myJson = await response.json();
    document.getElementById('groups').textContent = JSON.stringify(myJson, undefined, 2);

    // solution2table(myJson);

}

// This is a start for presenting the categorization more prettily
function solution2table(solution) {
    const table = document.createElement("table");
    for (const category in solution) {
        let row;
        row = document.createElement("tr");
        for (const word of solution[category]) {
                const cell = document.createElement("td");
                cell.textContent = word;
                row.appendChild(cell);
        }
        table.appendChild(row)
    }
    document.getElementById("heyooo").replaceChildren(table);
}

const form = document.getElementById("form");
form.addEventListener("submit", async (e) => handleSubmit(e), false);
</script>

